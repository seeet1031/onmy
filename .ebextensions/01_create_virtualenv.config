container_commands:
  01_create_virtualenv:
    command: "python3.11 -m venv /var/app/venv"
    leader_only: true

  02_install_requirements:
    command: "/var/app/venv/bin/pip install -r requirements.txt"
    leader_only: true

  03_set_activate:
    command: "source /var/app/venv/bin/activate && echo 'source /var/app/venv/bin/activate' >> /etc/profile.d/venv.sh"
    leader_only: true

commands:
  01_activate:
    command: "source /var/app/venv/bin/activate"